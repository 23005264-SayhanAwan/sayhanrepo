<!DOCTYPE html>
<html>
<head>
  <title>Create Event</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <script>
  function showFields(type) {
    document.querySelectorAll('.dynamic-section').forEach(el => el.style.display = 'none');
    
    const capacityField = document.getElementById('capacityField');

    if (type === 'Club Match') {
      document.getElementById('trainingFields').style.display = 'none';
      capacityField.style.display = 'block';
    } else if (type === 'Training Session') {
      document.getElementById('trainingFields').style.display = 'block';
      capacityField.style.display = 'block';
    } else if (type === 'AGM') {
      capacityField.querySelector('input').value = '';
      capacityField.style.display = 'none';
      document.getElementById('agmFields').style.display = 'block';
    } else if (type === 'Trial') {
      document.getElementById('trialFields').style.display = 'block';
      capacityField.style.display = 'block';
    } else if (type === 'Regular Event') {
      capacityField.style.display = 'block';
    }
  }
</script>
</head>

<body class="bg-dark text-white">
  <%- include('partials/Adminnav.ejs') %>
  <div class="container mt-5">
    <h2>Create New Event</h2>
    <form action="/Admin/events/create" method="POST" enctype="multipart/form-data">
      <!-- Title -->
      <div class="mb-3">
        <label class="form-label">Title</label>
        <input type="text" name="title" class="form-control" required>
      </div>

      <!-- Event Type -->
      <div class="mb-3">
        <label class="form-label">Event Type</label>
        <select name="eventType" class="form-control" onchange="showFields(this.value)" required>
          <option value="">-- Select Event Type --</option>
          <option value="Club Match">Club Match</option>
          <option value="Training Session">Training Session</option>
          <option value="AGM">Annual General Meeting</option>
          <option value="Trial">Trial</option>
          <option value="Regular Event">Regular Event</option>
        </select> 
      </div>

      <!-- Date -->
      <div class="mb-3">
        <label class="form-label">Date</label>
        <input type="date" name="eventDate" class="form-control" required>
      </div>

      <!-- EVENT TIMING - NOW FOR ALL EVENTS -->
      <div class="row">
        <div class="col-md-6">
          <div class="mb-3">
            <label class="form-label">Start Time</label>
            <input type="time" name="startTime" class="form-control" required>
          </div>
        </div>
        <div class="col-md-6">
          <div class="mb-3">
            <label class="form-label">End Time</label>
            <input type="time" name="endTime" class="form-control" required>
          </div>
        </div>
      </div>

      <!-- Location -->
      <div class="mb-3">
        <label class="form-label">Location</label>
        <input type="text" name="location" class="form-control" required>
      </div>

      <!-- Description -->
      <div class="mb-3">
        <label class="form-label">Description</label>
        <textarea name="description" class="form-control" rows="3" required></textarea>
      </div>

      <!-- Event Image -->
      <div class="mb-3">
        <label class="form-label">Upload Image</label>
        <input type="file" name="eventpic" class="form-control" accept="image/*" required>
      </div>
      
      <!-- Training Fields -->
      <div id="trainingFields" class="dynamic-section" style="display:none;">
        <div class="mb-3">
          <label class="form-label">Coach</label>
          <input type="text" name="coach" class="form-control">
        </div>
      </div>

      <!-- AGM Fields -->
      <div id="agmFields" class="dynamic-section" style="display:none;">
        <div class="mb-3">
          <label class="form-label">Meeting Room</label>
          <input type="text" name="meetingRoom" class="form-control">
        </div>
      </div>

      <!-- Trial Fields - REMOVED TIME FIELDS SINCE ALL EVENTS NOW HAVE TIMES -->
      <div id="trialFields" class="dynamic-section" style="display:none;">
        <!-- No additional fields needed for trials -->
      </div>

      <!-- Session -->
      <div class="mb-3">
        <label class="form-label">Event Session (Morning / Evening / Night)</label>
        <input type="text" name="eventSession" class="form-control">
      </div>

      <!-- Capacity Field (hidden for AGM) -->
      <div id="capacityField" class="mb-3" style="display:none;">
        <label class="form-label">Capacity</label>
        <input type="number" name="capacity" class="form-control" min="0" placeholder="Enter max attendees">
      </div>

      <button type="submit" class="btn btn-warning">Create Event</button>
    </form>
  </div>
</body>
</html>